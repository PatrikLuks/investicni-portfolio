<!doctype html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portfolio Manager - LITE</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 16px;
        padding: 32px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }
      h1 {
        color: #1a237e;
        margin-bottom: 24px;
        font-size: 2rem;
      }
      .status {
        padding: 12px 20px;
        background: #dcfce7;
        border: 2px solid #22c55e;
        border-radius: 8px;
        margin-bottom: 24px;
        color: #166534;
        font-weight: 600;
      }
      .form-group {
        margin-bottom: 20px;
      }
      label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #374151;
      }
      input,
      select {
        width: 100%;
        padding: 12px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        font-size: 1rem;
      }
      input:focus,
      select:focus {
        outline: none;
        border-color: #667eea;
      }
      button {
        background: #667eea;
        color: white;
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      }
      button:hover {
        background: #5568d3;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }
      button:active {
        transform: translateY(0);
      }
      table {
        width: 100%;
        margin-top: 32px;
        border-collapse: collapse;
      }
      th,
      td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #e5e7eb;
      }
      th {
        background: #f9fafb;
        font-weight: 600;
        color: #374151;
      }
      tr:hover {
        background: #f9fafb;
      }
      .delete-btn {
        background: #ef4444;
        padding: 6px 12px;
        font-size: 0.875rem;
      }
      .delete-btn:hover {
        background: #dc2626;
      }
      .summary {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin: 32px 0;
      }
      .summary-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 20px;
        border-radius: 12px;
        color: white;
      }
      .summary-card h3 {
        font-size: 0.875rem;
        opacity: 0.9;
        margin-bottom: 8px;
      }
      .summary-card .value {
        font-size: 1.75rem;
        font-weight: 700;
      }
      .loading {
        display: none;
        text-align: center;
        padding: 20px;
        color: #667eea;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üìä Portfolio Manager - LITE</h1>

      <div class="status">
        ‚úÖ Ultra-Lite verze naƒçtena - ≈Ω√ÅDN√â heavy libraries, instant loading!
      </div>

      <form id="fondForm">
        <div
          style="
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
          "
        >
          <div class="form-group">
            <label>N√°zev fondu *</label>
            <input type="text" id="nazev" required placeholder="nap≈ô. Conseq Horizont" />
          </div>

          <div class="form-group">
            <label>ISIN</label>
            <input type="text" id="isin" placeholder="CZ0000000001" />
          </div>

          <div class="form-group">
            <label>ƒå√°stka (Kƒç) *</label>
            <input type="number" id="castka" required placeholder="100000" />
          </div>

          <div class="form-group">
            <label>V√Ωnos (%) *</label>
            <input type="number" id="vynos" step="0.01" required placeholder="5.5" />
          </div>
        </div>

        <button type="submit">‚ûï P≈ôidat fond</button>
      </form>

      <div class="summary" id="summary" style="display: none">
        <div class="summary-card">
          <h3>Poƒçet fond≈Ø</h3>
          <div class="value" id="pocetFondu">0</div>
        </div>
        <div class="summary-card">
          <h3>Celkov√° investice</h3>
          <div class="value" id="celkovaInvestice">0 Kƒç</div>
        </div>
        <div class="summary-card">
          <h3>Pr≈Ømƒõrn√Ω v√Ωnos</h3>
          <div class="value" id="prumernyVynos">0%</div>
        </div>
        <div class="summary-card">
          <h3>Roƒçn√≠ zisk</h3>
          <div class="value" id="rocniZisk">0 Kƒç</div>
        </div>
      </div>

      <table id="portfolioTable" style="display: none">
        <thead>
          <tr>
            <th>N√°zev fondu</th>
            <th>ISIN</th>
            <th>ƒå√°stka</th>
            <th>V√Ωnos</th>
            <th>Roƒçn√≠ zisk</th>
            <th>Akce</th>
          </tr>
        </thead>
        <tbody id="portfolioBody"></tbody>
      </table>

      <div class="loading" id="loading">Naƒç√≠t√°n√≠...</div>
    </div>

    <script>
      console.log('üöÄ LITE version starting...');

      // Simple data storage
      let portfolio = [];

      // Load saved data
      try {
        const saved = localStorage.getItem('portfolio_lite');
        if (saved) {
          portfolio = JSON.parse(saved);
          console.log('‚úÖ Loaded', portfolio.length, 'funds from storage');
        }
      } catch (e) {
        console.error('Load error:', e);
      }

      // Save data
      function saveData() {
        try {
          localStorage.setItem('portfolio_lite', JSON.stringify(portfolio));
          console.log('‚úÖ Saved', portfolio.length, 'funds');
        } catch (e) {
          console.error('Save error:', e);
        }
      }

      // Format number
      function formatNumber(num) {
        return new Intl.NumberFormat('cs-CZ').format(Math.round(num));
      }

      // Calculate summary
      function updateSummary() {
        const pocet = portfolio.length;
        const celkem = portfolio.reduce((sum, f) => sum + parseFloat(f.castka || 0), 0);
        const avgVynos =
          pocet > 0 ? portfolio.reduce((sum, f) => sum + parseFloat(f.vynos || 0), 0) / pocet : 0;
        const rocniZisk = portfolio.reduce((sum, f) => {
          const castka = parseFloat(f.castka || 0);
          const vynos = parseFloat(f.vynos || 0);
          return sum + (castka * vynos) / 100;
        }, 0);

        document.getElementById('pocetFondu').textContent = pocet;
        document.getElementById('celkovaInvestice').textContent = formatNumber(celkem) + ' Kƒç';
        document.getElementById('prumernyVynos').textContent = avgVynos.toFixed(2) + '%';
        document.getElementById('rocniZisk').textContent = formatNumber(rocniZisk) + ' Kƒç';

        document.getElementById('summary').style.display = pocet > 0 ? 'grid' : 'none';
      }

      // Render table
      function renderTable() {
        const tbody = document.getElementById('portfolioBody');
        const table = document.getElementById('portfolioTable');

        if (portfolio.length === 0) {
          table.style.display = 'none';
          return;
        }

        table.style.display = 'table';
        tbody.innerHTML = '';

        portfolio.forEach((fond, index) => {
          const tr = document.createElement('tr');
          const castka = parseFloat(fond.castka || 0);
          const vynos = parseFloat(fond.vynos || 0);
          const zisk = (castka * vynos) / 100;

          tr.innerHTML = `
                    <td><strong>${fond.nazev}</strong></td>
                    <td>${fond.isin || '-'}</td>
                    <td>${formatNumber(castka)} Kƒç</td>
                    <td>${vynos.toFixed(2)}%</td>
                    <td>${formatNumber(zisk)} Kƒç</td>
                    <td>
                        <button class="delete-btn" onclick="deleteFond(${index})">üóëÔ∏è Smazat</button>
                    </td>
                `;

          tbody.appendChild(tr);
        });
      }

      // Delete fund
      window.deleteFond = function (index) {
        if (confirm('Opravdu smazat tento fond?')) {
          portfolio.splice(index, 1);
          saveData();
          renderTable();
          updateSummary();
        }
      };

      // Form submit
      document.getElementById('fondForm').addEventListener('submit', function (e) {
        e.preventDefault();

        const fond = {
          nazev: document.getElementById('nazev').value,
          isin: document.getElementById('isin').value,
          castka: document.getElementById('castka').value,
          vynos: document.getElementById('vynos').value,
          datum: new Date().toISOString(),
        };

        portfolio.push(fond);
        saveData();
        renderTable();
        updateSummary();

        // Clear form
        this.reset();
        document.getElementById('nazev').focus();

        console.log('‚úÖ Fund added:', fond.nazev);
      });

      // Initial render
      renderTable();
      updateSummary();

      console.log('‚úÖ LITE version ready!');
    </script>
  </body>
</html>
