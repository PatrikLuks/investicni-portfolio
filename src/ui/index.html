<!doctype html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Investiční portfolio – Analytika & kontrola</title>
    <link rel="manifest" href="/manifest.json" />
    <link rel="icon" href="/favicon.ico" />
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: #fafafa;
        color: #333;
        line-height: 1.6;
      }
      main { max-width: 1200px; margin: 0 auto; padding: 2rem; }
      section { margin-bottom: 2rem; background: white; border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
      h2 { font-size: 1.25rem; margin-bottom: 1rem; color: #222; }

      /* Summary cards */
      #summary .cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
      }
      #summary .card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 1rem;
        border-radius: 6px;
        text-align: center;
      }
      #summary .card > div:first-child { font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem; }
      #summary .card > strong { font-size: 1.5rem; display: block; }
      #summary .card.pos { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
      #summary .card.neg { background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%); }

      /* Table */
      table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.875rem;
      }
      th, td { padding: 0.75rem; text-align: left; border-bottom: 1px solid #eee; }
      th { background: #f9f9f9; font-weight: 600; color: #666; }
      td[contenteditable] {
        background: #fffef0;
        cursor: text;
        padding: 0.5rem;
        border-radius: 3px;
      }
      td[contenteditable]:focus { outline: 2px solid #667eea; background: white; }

      /* Buttons */
      button {
        background: #667eea;
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.875rem;
        font-weight: 600;
        transition: background 0.2s;
      }
      button:hover { background: #764ba2; }
      button:active { transform: scale(0.98); }

      /* Input */
      input[type="file"] { padding: 0.5rem; margin-right: 1rem; }

      /* Charts */
      canvas { max-height: 300px; margin-top: 1rem; }
      #charts {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
      }
      @media (max-width: 768px) {
        #charts { grid-template-columns: 1fr; }
      }

      /* IO section */
      #io {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
        align-items: center;
      }

      /* Footer */
      footer {
        text-align: center;
        padding: 2rem;
        font-size: 0.875rem;
        color: #999;
      }
    </style>
  </head>
  <body>
    <main>
      <header style="margin-bottom: 2rem;">
        <h1>📊 Investiční portfolio</h1>
        <p style="color: #666; margin-top: 0.5rem;">Analytika s čistými výpočty</p>
      </header>

      <section id="summary">
        <h2>Přehled portfolia</h2>
        <!-- renderSummary() vyplní -->
      </section>

      <section id="charts">
        <div>
          <h2>Alokace aktiv</h2>
          <canvas id="allocChart"></canvas>
        </div>
        <div>
          <h2>Vývoj hodnoty</h2>
          <canvas id="tsChart"></canvas>
        </div>
      </section>

      <section id="tableSection">
        <h2>Pozice v portfoliu</h2>
        <div id="table"></div>
      </section>

      <section id="io">
        <h2 style="width: 100%; margin-bottom: 1rem;">Import & Export</h2>
        <input type="file" id="importFile" accept=".json,.csv" title="Vložit JSON nebo CSV" />
        <button id="exportJson">💾 Export JSON</button>
        <button id="exportCsv">💾 Export CSV</button>
        <button id="resetDemo" style="margin-left: auto; background: #888;">🔄 Reset demo</button>
      </section>
    </main>

    <footer>
      <p>© 2025 Investiční portfolio | Powered by <code>portfolioMath.js</code></p>
    </footer>

    <script type="module" src="./main.js"></script>
  </body>
</html>
